---
- name: Ensure facts used by test
  ansible.builtin.setup:
    gather_subset: min
  when: "'os_family' not in ansible_facts"

- name: Make sure openssh is installed before creating backup
  become: true
  vars:
    __ssh_test_packages:
      RedHat:
        - openssh-clients
      '':
        - openssh-client
  ansible.builtin.package:
    name: >-
      {{ __ssh_test_packages[ansible_facts['os_family']]
      | default(__ssh_test_packages[''])
      }}
    state: present
